# L25 — Vision Coherence / Perceptive Integrity

L25 добавляет организму способность видеть петли как единое целое: каждая петля чувствует своё место в организме, воспринимает внешнюю среду, растягивается во времени и остаётся собой, даже трансформируясь. Это качество фиксируется через `visionScore`, который определяет, насколько петля стала "зрячей" и потому влияет на выборы L24 и выше.

## Четыре опоры видения

1. **Внутреннее ощущение (`innerSensing`)** — насколько петля чувствует собственное состояние, напряжения и здоровье.
2. **Внешнее восприятие (`outerSensing`)** — насколько петля улавливает контекст среды и реакцию мира на действия.
3. **Глубина во времени (`temporalDepth`)** — насколько петля учитывает прошлое и тянет траекторию в будущее, а не живёт одним тактом.
4. **Пластичность без распада (`plasticity`)** — способность меняться (делиться, менять форму) и при этом сохранять идентичность внутри организма.

`visionScore` собирает эти четыре измерения в один индекс согласованности видения. Чем ближе значения к 1, тем больше петля видит себя и соседей как единое живое поле.

## Инженерная формализация

Тип состояния петли с видением:

```ts
export interface VisionLoopState {
  loopId: string;
  innerSensing: number; // 0..1
  outerSensing: number; // 0..1
  temporalDepth: number; // 0..1
  plasticity: number; // 0..1
  visionScore: number; // 0..1, агрегат четырёх опор
  lastUpdated: number;
  note?: string;
}
```

Функция обновления принимает свежие сигналы петли (inner/outer/temporal/plasticity), смешивает их с прошлым состоянием (сглаживание по `smoothing`), пересчитывает `visionScore` и помечает таймштампом. Базовая агрегация — усреднение четырёх опор с учётом самого слабого звена (чтобы зрение не росло за счёт одного сильного канала при провале другого).

## Связь с петлями L21–L24

- L21–L23 поставляют сигналы о контексте, смыслах и информационном поле, которые заполняют `outerSensing` и `temporalDepth`.
- L24 при ранжировании траекторий может учитывать `visionScore` петли происхождения: зрячим траекториям даётся больший вес в выборе.
- Слои внутреннего голоса / совета (после L25) могут объяснять решения, опираясь на то, как "видят" выбранные петли.

## Минимальные шаги внедрения

1. Подключить `VisionLoopState` к существующим петлям: хранить его рядом с метриками удачи и траекторий.
2. Использовать `updateVisionLoopState` для подсчёта `visionScore` при каждом такте или при поступлении новых сигналов.
3. Обновить L24-логику: если у петли высокий `visionScore`, повышать её вес или снижать риск-пенальти.

Так мы превращаем метафору "кожного видения" в конкретную механику, которая даёт системе способность смотреть и внутрь, и наружу, и во времени, сохраняя целостность при трансформациях.
